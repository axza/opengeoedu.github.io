---
title: "Open Data Portale"
output: 
  flexdashboard::flex_dashboard:
    orientation: rows
    vertical_layout: fill
    logo: ../oge_logo/icon_scaled.jpg
    favicon: ../oge_logo/icon_scaled.jpg
---

```{r setup, include=FALSE}
library(leaflet)
library(flexdashboard)
library(DT)
library(htmltools)
library(crosstalk)
#portale <- read.csv("../data/portale_geocoded2.csv")
portale <- read.csv("../out_geodata/portale_shifted.csv")
portale$Link <- paste0("<a href=\"",htmlEscape(portale$URL),"\" target=\"_blank\">",htmlEscape(portale$Titel),"</a>")
portale$popup <- paste0("<a href=\"",htmlEscape(portale$URL),"\" target=\"_blank\">",htmlEscape(portale$Titel),"</a><br>", htmlEscape(portale$Beschreibung))

sd <- SharedData$new(portale)
#Column {data-width=650}
#Column {data-width=350}
#-----------------------------------------------------------------------
```

Row {data-height=20 data-width=800}
-----------------------------------------------------------------------


```{r, fig.height=2}

```

Row {.tabset .tabset-fade data-height=800}
-----------------------------------------------------------------------


### Karte 

```{r, fig.width=10, fig.height=8}

source("create_map_function.R")
m <- createMap(portale)
m
```


### Tabelle

```{r, fig.width=10, fig.height=8}
#DT::datatable(portale[c("Link","Beschreibung","Ort","Land","Bezug", "Lizenz")], escape = FALSE, options = list(
#  bPaginate = TRUE
#))

DT::datatable(portale[c("Link","Beschreibung","Ort","Bezug")], escape = FALSE, options = list(
  bPaginate = TRUE
))
```


